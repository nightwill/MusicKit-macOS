<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <title>MusicKit</title>

  <script>
  var music
      
  document.addEventListener('musickitloaded', function() {
    // MusicKit global is now defined
    MusicKit.configure({
      developerToken: '$DEV_TOKEN',
      app: {
        name: '$APP_NAME',
        build: '$APP_BUILD'
      }
    });
    
    music = MusicKit.getInstance();
    musicKitLoaded();
  });
    
  function musicKitLoaded() {
    log('MusicKit Loaded');
    try {
      webkit.messageHandlers.musicKitLoaded.postMessage("");
    } catch(err) {
      log(err);
    }
  }
  
  function log(message) {
      try {
        webkit.messageHandlers.log.postMessage(message);
      } catch(err) {
        console.log(err);
      }
  }
  </script>
  
  <script type="text/javascript"
      src="https://js-cdn.music.apple.com/musickit/v1/musickit.js"
      onerror="log('Error loading MusicKit JS')"></script>



</html>
